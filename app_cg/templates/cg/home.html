
{% extends 'cg/base.html' %}
{% block conteudo %}

<div class="">
    <!-- <section class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">
                    <h1>Página Inicial</h1>
                </div>
            </div>
        </div>
    </section> -->

    <section class="content">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-8 offset-md-2">
                    <div class="text-center mb-4 mt-5">
                        <!-- <h2 class="font-weight-bold">Gerador de Contratos</h2> -->
                        <h3>Bem-vindo {{ usuario.nome }}!</h3>
                        <hr class="mx-auto" style="width: 50px; border-top: 2px solid #6c757d;">
                    </div>

                    <div class="accordion" id="accordionExample">
                        {% if usuario.codempresa.codempresa == 0 %}
                            <div class="card">
                                <div class="card-header" id="headingOne">
                                    <h5 class="mb-0">
                                        <button class="btn btn-primary btn-block text-left custom-primary-link" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                            Espaço de Evento
                                        </button>
                                    </h5>
                                </div>
                                <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                                    <div class="card-body">
                                        Este formulário permite a geração de um documento para locação do espaço StarDokmus. Clique no botão abaixo para iniciar o processo.
                                        <div class="mt-3 text-center">
                                            <a href="/tela-de-negociacao/" class="btn btn-primary custom-primary-link" id="btn_contrato-espaco">Contrato de Espaço</a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header" id="headingTwo">
                                    <h5 class="mb-0">
                                        <button class="btn btn-primary btn-block text-left custom-primary-link" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                            Decoração
                                        </button>
                                    </h5>
                                </div>
                                <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
                                    <div class="card-body">
                                        Este formulário permite a geração de um documento para decoração de eventos. Clique no botão abaixo para iniciar o processo.
                                        <div class="mt-3 text-center">
                                            <a href="/tela-de-negociacao-decoracao/" class="btn btn-primary custom-primary-link" id="btn_contrato-decoracao">Contrato de Decoração</a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header" id="headingThree">
                                    <h5 class="mb-0">
                                        <button class="btn btn-primary btn-block text-left custom-primary-link" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                            Consultar Contratos Vigentes
                                        </button>
                                    </h5>
                                </div>
                                <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
                                    <div class="card-body">
                                        Esta seção permite a visualização dos contratos dos próximos eventos. Clique no botão abaixo para visualizar.
                                        <div class="mt-3 text-center">
                                            <a href="/contratos-ativos/" class="btn btn-primary custom-primary-link" id="btn_visualizar-contrato-ativos">Visualizar Contratos Ativos</a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header" id="headingFour">
                                    <h5 class="mb-0">
                                        <button class="btn btn-primary btn-block text-left custom-primary-link" type="button" data-toggle="collapse" data-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                            Consultar Contratos Vencidos
                                        </button>
                                    </h5>
                                </div>
                                <div id="collapseFour" class="collapse" aria-labelledby="headingFour" data-parent="#accordionExample">
                                    <div class="card-body">
                                        Esta seção permite a visualização de contratos dos eventos que já se passaram. Clique no botão abaixo para visualizar.
                                        <div class="mt-3 text-center">
                                            <a href="/contratos-vencidos/" class="btn btn-primary custom-primary-link" id="btn_visualizar-contrato-ativos">Visualizar Contratos Vencidos</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                        <div class="card">
                            <div class="card-header" id="headingTemplates">
                                <h5 class="mb-0">
                                    <button class="btn btn-primary btn-block text-left custom-primary-link" type="button" data-toggle="collapse" data-target="#collapseTemplates" aria-expanded="false" aria-controls="collapseTemplates">
                                        Gerenciar Templates
                                    </button>
                                </h5>
                            </div>
                            <div id="collapseTemplates" class="collapse" aria-labelledby="headingTemplates" data-parent="#accordionExample">
                                <div class="card-body">
                                    Cadastro e visualização de leiautes para os contratos.
                                    <div class="mt-3 text-center">
                                        <a href="/templates/" class="btn btn-primary custom-primary-link" id="btn_gerenciar-templates">Gerenciar Templates</a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header" id="headingContratos">
                                <h5 class="mb-0">
                                    <button class="btn btn-primary btn-block text-left custom-primary-link" type="button" data-toggle="collapse" data-target="#collapseContratos" aria-expanded="false" aria-controls="collapseContratos">
                                        Gerenciar Documentos
                                    </button>
                                </h5>
                            </div>
                            <div id="collapseContratos" class="collapse" aria-labelledby="headingContratos" data-parent="#accordionExample">
                                <div class="card-body">
                                    Visualização dos documentos que já foram gerados.
                                    <div class="mt-3 text-center">
                                        <a href="/contratos/" class="btn btn-primary custom-primary-link" id="btn_contratos">Gerenciar Documentos</a>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    
                    <!-- MOSTRAR APENAS NO MENU BAR -->
                    <!-- {% if usuario.permissoes in 'gestor admin' %}
                    <div class="mt-3">
                        <a class="btn btn-secondary btn-block" href="{% url 'lista_usuarios' %}" role="button">Gerenciar Usuários</a>
                    </div>
                    {% endif %} -->

                    <div class="text-center mt-4 mb-4">
                        <a href="{% url 'logout' %}" style="color: #dc3545; font-weight: bold;">Sair</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
  <script>

    document.getElementById("redirecionar4").addEventListener("click", function(event) {
        event.preventDefault();
        document.getElementById("spinner").style.display = "inline-block";
        
        setTimeout(() => {
            window.location.href = this.href;
        }, 500);
    });

    window.addEventListener("pageshow", function() {
      document.getElementById("spinner").style.display = "none";
    });


    // Exibe o spinner de carregamento
    document.querySelectorAll("a[id^='btn_contratos']").forEach(btn => {
        btn.addEventListener("click", function(event) {
            event.preventDefault();
            document.getElementById("spinner").style.display = "";

            setTimeout(() => {
                window.location.href = this.href;
            }, 500);
        });
    });

    // Esconde novamente o spinner assim que a nova página é apresentada
    window.addEventListener("pageshow", function() {
        document.getElementById("spinner").style.display = "none";
    });

  </script>
    
{% endblock %}
